<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Commander votre handpan Mistral Pans. R√©servez avec un acompte ou prenez rendez-vous pour personnaliser votre projet.">
  <link rel="canonical" href="https://mistralpans.fr/commander.html">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://mistralpans.fr/commander.html">
  <meta property="og:title" content="Commander un Handpan - Mistral Pans">
  <meta property="og:description" content="Commandez votre handpan sur mesure fabriqu√© en √éle-de-France.">
  <meta property="og:image" content="https://mistralpans.fr/ressources/images/20230801_1622372.jpg">
  <meta property="og:locale" content="fr_FR">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Commander un Handpan - Mistral Pans">
  <meta name="twitter:description" content="Commandez votre handpan sur mesure.">
  <meta name="twitter:image" content="https://mistralpans.fr/ressources/images/20230801_1622372.jpg">
  
  <title>Commander - Mistral Pans</title>
  
  <!-- Fonts -->
  
  <!-- Styles -->
  <link rel="stylesheet" href="css/style.css">
  
  <style>
    .order-page {
      padding-top: calc(var(--header-height) + var(--space-3xl));
      min-height: 100vh;
      background: var(--color-bg);
    }
    
    .order-header {
      text-align: center;
      margin-bottom: var(--space-3xl);
    }
    
    .order-product {
      display: flex;
      align-items: center;
      gap: var(--space-lg);
      background: var(--color-white);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-lg);
      padding: var(--space-lg);
      margin-bottom: var(--space-3xl);
    }
    
    .order-product__image {
      width: 120px;
      height: 120px;
      background: var(--color-bg-warm);
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }
    
    .order-product__info h3 {
      margin-bottom: var(--space-xs);
    }
    
    .order-product__notes {
      font-size: 0.875rem;
      color: var(--color-text-muted);
      margin-bottom: var(--space-sm);
    }
    
    .order-product__price {
      font-family: var(--font-display);
      font-size: 1.5rem;
      color: var(--color-accent);
    }
    
    .order-options {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: var(--space-xl);
      margin-bottom: var(--space-3xl);
    }
    
    @media (min-width: 769px) {
      .order-options--three {
        grid-template-columns: repeat(3, 1fr);
      }
    }
    @media (max-width: 768px) {
      .order-options {
        grid-template-columns: 1fr;
      }
    }
    
    .order-option {
      background: var(--color-white);
      border: 2px solid var(--color-border);
      border-radius: var(--radius-lg);
      padding: var(--space-2xl);
      transition: all var(--transition-base);
      cursor: pointer;
      position: relative;
    }
    
    .order-option:hover {
      border-color: var(--color-accent);
      box-shadow: var(--shadow-md);
    }
    
    .order-option.selected {
      border-color: var(--color-accent);
      background: linear-gradient(180deg, rgba(184, 134, 11, 0.03) 0%, transparent 100%);
    }
    
    .order-option__badge {
      position: absolute;
      top: var(--space-lg);
      right: var(--space-lg);
      background: var(--color-success);
      color: white;
      font-size: 0.75rem;
      font-weight: 600;
      padding: 4px 10px;
      border-radius: var(--radius-full);
    }
    
    .order-option__icon {
      width: 48px;
      height: 48px;
      background: var(--color-bg-warm);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      margin-bottom: var(--space-lg);
    }
    
    .order-option__title {
      font-size: 1.25rem;
      margin-bottom: var(--space-sm);
    }
    
    .order-option__description {
      color: var(--color-text-light);
      font-size: 0.9375rem;
      margin-bottom: var(--space-lg);
    }
    
    .order-option__details {
      background: var(--color-bg-warm);
      border-radius: var(--radius-md);
      padding: var(--space-md);
      font-size: 0.875rem;
    }
    
    .order-option__details li {
      padding: var(--space-xs) 0;
      padding-left: var(--space-lg);
      position: relative;
      list-style: none;
    }
    
    .order-option__details li::before {
      content: '‚úì';
      position: absolute;
      left: 0;
      color: var(--color-success);
    }
    
    .order-form {
      background: var(--color-white);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-lg);
      padding: var(--space-2xl);
      display: none;
    }
    
    .order-form.active {
      display: block;
    }
    
    .order-form__title {
      margin-bottom: var(--space-xl);
      padding-bottom: var(--space-lg);
      border-bottom: 1px solid var(--color-border);
    }
    
    .order-summary {
      background: var(--color-bg-warm);
      border-radius: var(--radius-md);
      padding: var(--space-lg);
      margin-bottom: var(--space-xl);
    }
    
    .order-summary__row {
      display: flex;
      justify-content: space-between;
      padding: var(--space-sm) 0;
    }
    
    .order-summary__row.total {
      border-top: 1px solid var(--color-border);
      margin-top: var(--space-sm);
      padding-top: var(--space-md);
      font-weight: 600;
      font-size: 1.125rem;
    }
    
    .paypal-note {
      background: #FFF8E7;
      border: 1px solid #F0D78C;
      border-radius: var(--radius-md);
      padding: var(--space-lg);
      margin-bottom: var(--space-xl);
      font-size: 0.9375rem;
    }
    
    .paypal-note strong {
      color: #0070BA;
    }

    /* ---- 4-column grid (stock items) ---- */
    .order-options--four {
      grid-template-columns: repeat(4, 1fr);
    }
    @media (max-width: 900px) {
      .order-options--four {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    @media (max-width: 500px) {
      .order-options--four {
        grid-template-columns: 1fr;
      }
    }

    /* ---- Accessories summary ---- */
    .order-accessories {
      background: var(--color-bg-warm);
      border-radius: var(--radius-md);
      padding: var(--space-md) var(--space-lg);
      margin-bottom: var(--space-xl);
      font-size: 0.9375rem;
    }
    .order-accessories__list .order-accessories__item {
      display: flex;
      justify-content: space-between;
      padding: var(--space-xs) 0;
    }

    /* ---- Oney installment selector ---- */
    .oney-selector {
      display: flex;
      gap: var(--space-md);
      margin-bottom: var(--space-xl);
    }
    .oney-selector__option {
      flex: 1;
      border: 2px solid var(--color-border);
      border-radius: var(--radius-md);
      padding: var(--space-lg);
      text-align: center;
      cursor: pointer;
      transition: all var(--transition-base);
      background: var(--color-white);
    }
    .oney-selector__option:hover {
      border-color: var(--color-accent);
    }
    .oney-selector__option.selected {
      border-color: var(--color-accent);
      background: rgba(13, 115, 119, 0.04);
    }
    .oney-selector__option input[type="radio"] {
      display: none;
    }
    .oney-selector__title {
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--color-accent);
      margin-bottom: var(--space-xs);
    }
    .oney-selector__detail {
      font-size: 0.875rem;
      color: var(--color-text-muted);
    }
    .oney-breakdown {
      background: var(--color-bg-warm);
      border-radius: var(--radius-md);
      padding: var(--space-lg);
      margin-bottom: var(--space-xl);
    }
    .oney-breakdown__row {
      display: flex;
      justify-content: space-between;
      padding: var(--space-xs) 0;
      font-size: 0.9375rem;
    }
    .oney-breakdown__row.highlight {
      font-weight: 600;
      color: var(--color-accent);
      font-size: 1rem;
      border-top: 1px solid var(--color-border);
      margin-top: var(--space-sm);
      padding-top: var(--space-sm);
    }
    .oney-notice {
      background: #FFF8E7;
      border: 1px solid #F0D78C;
      border-radius: var(--radius-md);
      padding: var(--space-md);
      font-size: 0.8125rem;
      color: var(--color-text-light);
      margin-bottom: var(--space-xl);
    }
    .oney-unavailable {
      background: var(--color-bg-warm);
      border-radius: var(--radius-md);
      padding: var(--space-xl);
      text-align: center;
      color: var(--color-text-muted);
    }

    /* ---- Integrated Payment card form ---- */
    .card-form {
      margin-top: var(--space-xl);
      padding-top: var(--space-xl);
      border-top: 1px solid var(--color-border);
    }
    .card-form__title {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: var(--space-lg);
      display: flex;
      align-items: center;
      gap: var(--space-sm);
    }
    .card-form__title svg {
      width: 20px;
      height: 20px;
      color: var(--color-accent);
    }
    .card-form__schemes {
      display: flex;
      gap: var(--space-sm);
      margin-bottom: var(--space-lg);
    }
    .card-form__schemes img {
      height: 24px;
      opacity: 0.7;
    }
    .card-field {
      margin-bottom: var(--space-md);
    }
    .card-field__label {
      display: block;
      font-size: 0.875rem;
      font-weight: 500;
      color: var(--color-text);
      margin-bottom: var(--space-xs);
    }
    .card-field__input {
      height: 44px;
      border: 1px solid var(--color-border);
      border-radius: var(--radius-md);
      padding: 0 var(--space-md);
      background: var(--color-white);
      transition: border-color 0.2s;
    }
    .card-field__input:focus-within {
      border-color: var(--color-accent);
      box-shadow: 0 0 0 3px rgba(13, 115, 119, 0.1);
    }
    .card-field__input.integrated_payment_error {
      border-color: var(--color-error);
    }
    .card-field__row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--space-md);
    }
    .card-form__error {
      color: var(--color-error);
      font-size: 0.8125rem;
      margin-top: var(--space-xs);
      min-height: 1.2em;
    }
    /* ---- Cart multi-items summary ---- */
    .cart-items-summary {
      background: var(--color-white);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-lg);
      padding: var(--space-lg);
      margin-bottom: var(--space-3xl);
    }
    .cart-items-list {
      display: flex;
      flex-direction: column;
      gap: var(--space-md);
    }
    .cart-item {
      display: flex;
      align-items: center;
      gap: var(--space-md);
      padding: var(--space-md);
      background: var(--color-bg-warm);
      border-radius: var(--radius-md);
      position: relative;
    }
    .cart-item__image {
      width: 60px;
      height: 60px;
      background: var(--color-bg);
      border-radius: var(--radius-sm);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      overflow: hidden;
    }
    .cart-item__image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .cart-item__info {
      flex: 1;
      min-width: 0;
    }
    .cart-item__name {
      font-weight: 600;
      font-size: 0.9375rem;
      margin-bottom: 2px;
    }
    .cart-item__details {
      font-size: 0.8125rem;
      color: var(--color-text-muted);
    }
    .cart-item__options {
      font-size: 0.8125rem;
      color: var(--color-text-light);
      margin-top: 2px;
    }
    .cart-item__price {
      font-family: var(--font-display);
      font-size: 1rem;
      color: var(--color-accent);
      white-space: nowrap;
    }
    .cart-item__remove {
      position: absolute;
      top: 0.25rem;
      right: 0.25rem;
      width: 24px;
      height: 24px;
      border: none;
      background: none;
      color: var(--color-text-muted);
      cursor: pointer;
      font-size: 1rem;
      line-height: 1;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: all 0.15s;
    }
    .cart-item__remove:hover {
      background: var(--color-error);
      color: white;
    }
    .cart-items-total {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-top: var(--space-md);
      margin-top: var(--space-md);
      border-top: 2px solid var(--color-border);
      font-family: var(--font-display);
      font-size: 1.25rem;
      font-weight: 600;
    }
    .cart-empty {
      text-align: center;
      padding: var(--space-2xl);
      color: var(--color-text-muted);
    }
    .cart-empty a {
      color: var(--color-accent);
    }

    .card-form__loading {
      display: none;
      text-align: center;
      padding: var(--space-xl);
      color: var(--color-text-muted);
    }
    .card-form__loading.active {
      display: block;
    }
    .card-form__spinner {
      width: 32px;
      height: 32px;
      border: 3px solid var(--color-border);
      border-top-color: var(--color-accent);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      margin: 0 auto var(--space-md);
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
  </style>
  
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='45' fill='%230D7377'/></svg>">
</head>
<body data-page="commander" data-footer="minimal">

  <div id="site-header"></div>


  <main id="main-content">
  <!-- ========== ORDER PAGE ========== -->
  <section class="order-page">
    <div class="container container--narrow">
      
      <div class="order-header">
        <p class="eyebrow">√âtape 1 sur 2</p>
        <h1>Commander</h1>
      </div>
      
      <!-- Cart Items Summary (multi-item) -->
      <div id="cart-items-summary" class="cart-items-summary" style="display:none;">
        <div id="cart-items-list" class="cart-items-list"></div>
        <div class="cart-items-total">
          <span>Total</span>
          <span id="cart-items-total-price" class="order-product__price">0 ‚Ç¨</span>
        </div>
      </div>

      <!-- Single Product Summary (legacy URL params) -->
      <div id="single-product-summary" class="order-product">
        <div class="order-product__image">
          <span style="font-size: 2.5rem; opacity: 0.3;">üéµ</span>
        </div>
        <div class="order-product__info">
          <h3 id="product-name">D Kurd ‚Ä¢ 9 notes</h3>
          <p class="order-product__notes" id="product-notes">D3 ‚Ä¢ A3 ‚Ä¢ Bb3 ‚Ä¢ C4 ‚Ä¢ D4 ‚Ä¢ E4 ‚Ä¢ F4 ‚Ä¢ G4 ‚Ä¢ A4</p>
          <p class="order-product__price" id="product-price">1 400 ‚Ç¨</p>
        </div>
      </div>

      <!-- Accessory summary (populated by JS if housse/livraison present) -->
      <div id="order-accessories" class="order-accessories" style="display:none;">
        <div class="order-accessories__list" id="accessories-list"></div>
      </div>

      <h2 style="margin-bottom: var(--space-lg);">Choisissez votre option</h2>

      <div class="order-options order-options--three" id="order-options-grid">

        <!-- Option 0: Paiement int√©gral (stock only, hidden by default) -->
        <div class="order-option" data-option="full" style="display:none;" onclick="selectOption('full')" onkeydown="if(event.key==='Enter'||event.key===' ')selectOption('full')" tabindex="0" role="button" aria-label="Payer maintenant">
          <span class="order-option__badge" id="badge-full">Recommand√©</span>
          <div class="order-option__icon">üí≥</div>
          <h3 class="order-option__title">Payer maintenant</h3>
          <p class="order-option__description">
            R√©glez le montant total et recevez votre instrument.
          </p>
          <ul class="order-option__details">
            <li>Paiement unique de <strong id="option-full-amount">1 400 ‚Ç¨</strong></li>
            <li>Exp√©dition imm√©diate</li>
            <li>Paiement s√©curis√©</li>
          </ul>
        </div>

        <!-- Option 1: Acompte 30% -->
        <div class="order-option" data-option="deposit" onclick="selectOption('deposit')" onkeydown="if(event.key==='Enter'||event.key===' ')selectOption('deposit')" tabindex="0" role="button" aria-label="R√©server avec acompte de 30%">
          <span class="order-option__badge" id="badge-deposit">Populaire</span>
          <div class="order-option__icon">üí≥</div>
          <h3 class="order-option__title">R√©server avec acompte</h3>
          <p class="order-option__description">
            Versez 30 % aujourd'hui, le solde √† la livraison.
          </p>
          <ul class="order-option__details">
            <li>Acompte de <strong id="option-deposit-amount">30 %</strong></li>
            <li>Solde √† la livraison</li>
            <li>D√©lai : 8-12 semaines</li>
          </ul>
        </div>

        <!-- Option 2: Oney 3x/4x -->
        <div class="order-option" data-option="oney" onclick="selectOption('oney')" onkeydown="if(event.key==='Enter'||event.key===' ')selectOption('oney')" tabindex="0" role="button" aria-label="Payer en 3 ou 4 fois avec Oney">
          <div class="order-option__icon">üîÑ</div>
          <h3 class="order-option__title">Payer en 3x ou 4x</h3>
          <p class="order-option__description">
            R√©glez le montant total en 3 ou 4 fois sans frais via Oney.
          </p>
          <ul class="order-option__details">
            <li>3x ou 4x sans frais</li>
            <li>Montant total r√©parti</li>
            <li>De 100 ‚Ç¨ √† 3 000 ‚Ç¨</li>
          </ul>
        </div>

        <!-- Option 3: RDV -->
        <div class="order-option" data-option="appointment" onclick="selectOption('appointment')" onkeydown="if(event.key==='Enter'||event.key===' ')selectOption('appointment')" tabindex="0" role="button" aria-label="Personnaliser mon projet avec un rendez-vous">
          <div class="order-option__icon">üìÖ</div>
          <h3 class="order-option__title">Personnaliser mon projet</h3>
          <p class="order-option__description">
            Discutons de votre projet avant de commander.
          </p>
          <ul class="order-option__details">
            <li>√âchange t√©l√©phone ou visio</li>
            <li>Conseil sur les gammes</li>
            <li>Devis personnalis√©</li>
            <li>Sans engagement</li>
          </ul>
        </div>

      </div>
      
      <!-- Form: Deposit -->
      <div id="form-deposit" class="order-form">
        <h3 class="order-form__title">R√©servation avec acompte (30 %)</h3>

        <div class="order-summary">
          <div class="order-summary__row">
            <span>Instrument</span>
            <span id="summary-product">D Kurd 9 notes</span>
          </div>
          <div class="order-summary__row">
            <span>Prix total</span>
            <span id="summary-total">1 400 ‚Ç¨</span>
          </div>
          <div class="order-summary__row">
            <span>Acompte aujourd'hui (30 %)</span>
            <span id="summary-deposit">420 ‚Ç¨</span>
          </div>
          <div class="order-summary__row total">
            <span>Reste √† payer</span>
            <span id="summary-remaining">980 ‚Ç¨</span>
          </div>
        </div>
        
        <form data-form="order" data-honeypot>
          <!-- Honeypot anti-spam -->
          <div class="form-group" style="position:absolute;left:-9999px;opacity:0;height:0;overflow:hidden;" aria-hidden="true" tabindex="-1">
            <label for="hp-order-website">Site web</label>
            <input type="text" name="website" id="hp-order-website" autocomplete="off" tabindex="-1">
          </div>

          <input type="hidden" name="type" value="Commande avec acompte">
          <input type="hidden" name="product" id="form-product" value="D Kurd 9 notes">
          <input type="hidden" name="amount" id="form-deposit-amount" value="420">

          <div class="form-row">
            <div class="form-group">
              <label class="form-label" for="deposit-firstname">Pr√©nom *</label>
              <input type="text" id="deposit-firstname" name="firstname" class="form-input" required>
            </div>
            <div class="form-group">
              <label class="form-label" for="deposit-lastname">Nom *</label>
              <input type="text" id="deposit-lastname" name="lastname" class="form-input" required>
            </div>
          </div>
          
          <div class="form-group">
            <label class="form-label" for="deposit-email">Email *</label>
            <input type="email" id="deposit-email" name="email" class="form-input" required>
          </div>
          
          <div class="form-group">
            <label class="form-label" for="deposit-phone">T√©l√©phone *</label>
            <input type="tel" id="deposit-phone" name="phone" class="form-input" required>
          </div>
          
          <div class="form-group">
            <label class="form-label" for="deposit-address">Adresse de livraison *</label>
            <textarea id="deposit-address" name="address" class="form-textarea" rows="3" placeholder="Adresse compl√®te ou 'Retrait atelier'" required></textarea>
          </div>
          
          <div class="form-group">
            <label class="form-label" for="deposit-message">Message (optionnel)</label>
            <textarea id="deposit-message" name="message" class="form-textarea" rows="2" placeholder="Pr√©cisions, questions..."></textarea>
          </div>
          
          <div class="form-group">
            <label class="form-checkbox">
              <input type="checkbox" name="cgv" required>
              <span>J'accepte les <a href="cgv.html" target="_blank">conditions g√©n√©rales de vente</a> *</span>
            </label>
          </div>

          <!-- Integrated Payment : formulaire de carte embarqu√© -->
          <div id="card-form" class="card-form" style="display: none;">
            <div class="card-form__title">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="4" width="22" height="16" rx="2"/><line x1="1" y1="10" x2="23" y2="10"/></svg>
              Informations de paiement
            </div>
            <div id="card-schemes" class="card-form__schemes"></div>

            <div class="card-field">
              <label class="card-field__label">Titulaire de la carte</label>
              <div id="cardholder-container" class="card-field__input"></div>
              <div class="card-form__error" id="cardholder-error"></div>
            </div>

            <div class="card-field">
              <label class="card-field__label">Num√©ro de carte</label>
              <div id="cardnumber-container" class="card-field__input"></div>
              <div class="card-form__error" id="cardnumber-error"></div>
            </div>

            <div class="card-field__row">
              <div class="card-field">
                <label class="card-field__label">Date d'expiration</label>
                <div id="expiration-container" class="card-field__input"></div>
                <div class="card-form__error" id="expiration-error"></div>
              </div>
              <div class="card-field">
                <label class="card-field__label">CVV</label>
                <div id="cvv-container" class="card-field__input"></div>
                <div class="card-form__error" id="cvv-error"></div>
              </div>
            </div>

            <div id="card-form-loading" class="card-form__loading">
              <div class="card-form__spinner"></div>
              <p>Traitement du paiement en cours...</p>
            </div>
          </div>

          <button type="submit" class="btn btn--primary btn--lg btn--full" id="deposit-submit-btn">
            Payer l'acompte (<span id="deposit-btn-amount">420 ‚Ç¨</span>)
          </button>

          <p class="text-sm text-muted text-center" style="margin-top: var(--space-md);">
            Paiement s√©curis√© par carte bancaire.
          </p>
        </form>
      </div>
      
      <!-- Form: Full Payment (stock items) -->
      <div id="form-full" class="order-form">
        <h3 class="order-form__title">Paiement int√©gral</h3>

        <div class="order-summary">
          <div class="order-summary__row">
            <span>Instrument</span>
            <span id="summary-full-product">D Kurd 9 notes</span>
          </div>
          <div class="order-summary__row" id="summary-full-housse-row" style="display:none;">
            <span>Housse</span>
            <span id="summary-full-housse">‚Äî</span>
          </div>
          <div class="order-summary__row total">
            <span>Total √† payer</span>
            <span id="summary-full-total">1 400 ‚Ç¨</span>
          </div>
        </div>

        <form data-form="full" data-honeypot>
          <!-- Honeypot anti-spam -->
          <div class="form-group" style="position:absolute;left:-9999px;opacity:0;height:0;overflow:hidden;" aria-hidden="true" tabindex="-1">
            <label for="hp-full-website">Site web</label>
            <input type="text" name="website" id="hp-full-website" autocomplete="off" tabindex="-1">
          </div>

          <input type="hidden" name="type" value="Commande paiement int√©gral">
          <input type="hidden" name="product" id="form-product-full" value="D Kurd 9 notes">
          <input type="hidden" name="amount" id="form-full-amount" value="1400">

          <div class="form-row">
            <div class="form-group">
              <label class="form-label" for="full-firstname">Pr√©nom *</label>
              <input type="text" id="full-firstname" name="firstname" class="form-input" required>
            </div>
            <div class="form-group">
              <label class="form-label" for="full-lastname">Nom *</label>
              <input type="text" id="full-lastname" name="lastname" class="form-input" required>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label" for="full-email">Email *</label>
            <input type="email" id="full-email" name="email" class="form-input" required>
          </div>

          <div class="form-group">
            <label class="form-label" for="full-phone">T√©l√©phone *</label>
            <input type="tel" id="full-phone" name="phone" class="form-input" required>
          </div>

          <div class="form-group">
            <label class="form-label" for="full-address">Adresse de livraison *</label>
            <textarea id="full-address" name="address" class="form-textarea" rows="3" placeholder="Adresse compl√®te ou 'Retrait atelier'" required></textarea>
          </div>

          <div class="form-group">
            <label class="form-label" for="full-message">Message (optionnel)</label>
            <textarea id="full-message" name="message" class="form-textarea" rows="2" placeholder="Pr√©cisions, questions..."></textarea>
          </div>

          <div class="form-group">
            <label class="form-checkbox">
              <input type="checkbox" name="cgv" required>
              <span>J'accepte les <a href="cgv.html" target="_blank">conditions g√©n√©rales de vente</a> *</span>
            </label>
          </div>

          <button type="submit" class="btn btn--primary btn--lg btn--full" id="full-submit-btn">
            Payer <span id="full-btn-amount">1 400 ‚Ç¨</span>
          </button>

          <p class="text-sm text-muted text-center" style="margin-top: var(--space-md);">
            Paiement s√©curis√© par carte bancaire.
          </p>
        </form>
      </div>

      <!-- Form: Oney 3x/4x -->
      <div id="form-oney" class="order-form">
        <h3 class="order-form__title">Paiement en plusieurs fois</h3>

        <!-- V√©rifie √©ligibilit√© (100-3000‚Ç¨) -->
        <div id="oney-eligible">

          <!-- S√©lecteur 3x / 4x -->
          <div class="oney-selector" id="oney-selector">
            <label class="oney-selector__option selected" data-installments="3">
              <input type="radio" name="installments" value="3" checked>
              <div class="oney-selector__title">3x</div>
              <div class="oney-selector__detail" id="oney-3x-detail">3 √ó 467 ‚Ç¨</div>
            </label>
            <label class="oney-selector__option" data-installments="4">
              <input type="radio" name="installments" value="4">
              <div class="oney-selector__title">4x</div>
              <div class="oney-selector__detail" id="oney-4x-detail">4 √ó 350 ‚Ç¨</div>
            </label>
          </div>

          <!-- D√©tail des √©ch√©ances -->
          <div class="oney-breakdown" id="oney-breakdown">
            <div class="oney-breakdown__row">
              <span>Instrument</span>
              <span id="oney-product">D Kurd 9 notes</span>
            </div>
            <div class="oney-breakdown__row highlight">
              <span>Total</span>
              <span id="oney-total">1 400 ‚Ç¨</span>
            </div>
            <div class="oney-breakdown__row" id="oney-schedule-1">
              <span>1√®re √©ch√©ance (aujourd'hui)</span>
              <span id="oney-amount-1">467 ‚Ç¨</span>
            </div>
            <div class="oney-breakdown__row" id="oney-schedule-2">
              <span>2√®me √©ch√©ance</span>
              <span id="oney-amount-2">467 ‚Ç¨</span>
            </div>
            <div class="oney-breakdown__row" id="oney-schedule-3">
              <span>3√®me √©ch√©ance</span>
              <span id="oney-amount-3">466 ‚Ç¨</span>
            </div>
            <div class="oney-breakdown__row" id="oney-schedule-4" style="display: none;">
              <span>4√®me √©ch√©ance</span>
              <span id="oney-amount-4">‚Äî</span>
            </div>
          </div>

          <div class="oney-notice">
            Paiement op√©r√© par Oney. Vous serez redirig√© vers une page s√©curis√©e pour finaliser votre paiement. Une adresse compl√®te et un num√©ro de t√©l√©phone mobile sont requis.
          </div>

          <form data-form="oney" data-honeypot>
            <!-- Honeypot anti-spam -->
            <div class="form-group" style="position:absolute;left:-9999px;opacity:0;height:0;overflow:hidden;" aria-hidden="true" tabindex="-1">
              <label for="hp-oney-website">Site web</label>
              <input type="text" name="website" id="hp-oney-website" autocomplete="off" tabindex="-1">
            </div>

            <input type="hidden" name="type" value="Commande Oney">
            <input type="hidden" name="product" id="form-product-oney" value="D Kurd 9 notes">
            <input type="hidden" name="installments" id="form-installments" value="3">

            <div class="form-row">
              <div class="form-group">
                <label class="form-label" for="oney-firstname">Pr√©nom *</label>
                <input type="text" id="oney-firstname" name="firstname" class="form-input" required>
              </div>
              <div class="form-group">
                <label class="form-label" for="oney-lastname">Nom *</label>
                <input type="text" id="oney-lastname" name="lastname" class="form-input" required>
              </div>
            </div>

            <div class="form-group">
              <label class="form-label" for="oney-email">Email *</label>
              <input type="email" id="oney-email" name="email" class="form-input" required>
            </div>

            <div class="form-group">
              <label class="form-label" for="oney-phone">T√©l√©phone mobile * <span style="font-weight:400;color:var(--color-text-muted)">(requis pour Oney)</span></label>
              <input type="tel" id="oney-phone" name="phone" class="form-input" placeholder="06 12 34 56 78" required>
            </div>

            <div class="form-group">
              <label class="form-label" for="oney-address">Adresse *</label>
              <input type="text" id="oney-address" name="address" class="form-input" placeholder="Num√©ro et rue" required>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label class="form-label" for="oney-postcode">Code postal *</label>
                <input type="text" id="oney-postcode" name="postcode" class="form-input" placeholder="75000" required>
              </div>
              <div class="form-group">
                <label class="form-label" for="oney-city">Ville *</label>
                <input type="text" id="oney-city" name="city" class="form-input" required>
              </div>
            </div>

            <div class="form-group">
              <label class="form-checkbox">
                <input type="checkbox" name="cgv" required>
                <span>J'accepte les <a href="cgv.html" target="_blank">conditions g√©n√©rales de vente</a> *</span>
              </label>
            </div>

            <button type="submit" class="btn btn--primary btn--lg btn--full" id="oney-submit-btn">
              Payer en <span id="oney-btn-installments">3</span>x (<span id="oney-btn-total">1 400 ‚Ç¨</span>)
            </button>

            <p class="text-sm text-muted text-center" style="margin-top: var(--space-md);">
              Vous serez redirig√© vers Oney pour le paiement s√©curis√©.
            </p>
          </form>
        </div>

        <!-- Message si montant hors plage Oney -->
        <div id="oney-ineligible" class="oney-unavailable" style="display: none;">
          <p><strong>Paiement en plusieurs fois non disponible</strong></p>
          <p>Le paiement Oney est disponible pour les montants entre 100 ‚Ç¨ et 3 000 ‚Ç¨.</p>
          <p style="margin-top: var(--space-md);">
            <a href="#" onclick="selectOption('deposit'); return false;" class="btn btn--ghost">R√©server avec acompte (30 %)</a>
          </p>
        </div>
      </div>

      <!-- Form: Appointment -->
      <div id="form-appointment" class="order-form">
        <h3 class="order-form__title">Prendre rendez-vous</h3>
        
        <p style="margin-bottom: var(--space-xl); color: var(--color-text-light);">
          Discutons de votre projet ! Je vous recontacte sous 48h pour convenir d'un cr√©neau.
        </p>
        
        <form data-form="appointment" data-honeypot>
          <!-- Honeypot anti-spam -->
          <div class="form-group" style="position:absolute;left:-9999px;opacity:0;height:0;overflow:hidden;" aria-hidden="true" tabindex="-1">
            <label for="hp-rdv-website">Site web</label>
            <input type="text" name="website" id="hp-rdv-website" autocomplete="off" tabindex="-1">
          </div>

          <input type="hidden" name="type" value="Demande de RDV">
          <input type="hidden" name="product_interest" id="form-product-rdv" value="D Kurd 9 notes">

          <div class="form-row">
            <div class="form-group">
              <label class="form-label" for="rdv-firstname">Pr√©nom *</label>
              <input type="text" id="rdv-firstname" name="firstname" class="form-input" required>
            </div>
            <div class="form-group">
              <label class="form-label" for="rdv-lastname">Nom *</label>
              <input type="text" id="rdv-lastname" name="lastname" class="form-input" required>
            </div>
          </div>
          
          <div class="form-group">
            <label class="form-label" for="rdv-email">Email *</label>
            <input type="email" id="rdv-email" name="email" class="form-input" required>
          </div>
          
          <div class="form-group">
            <label class="form-label" for="rdv-phone">T√©l√©phone *</label>
            <input type="tel" id="rdv-phone" name="phone" class="form-input" required>
          </div>
          
          <div class="form-group">
            <label class="form-label">Comment pr√©f√©rez-vous √©changer ?</label>
            <div class="form-radio-group">
              <label class="form-radio">
                <input type="radio" name="contact_preference" value="telephone" checked>
                <span>T√©l√©phone</span>
              </label>
              <label class="form-radio">
                <input type="radio" name="contact_preference" value="visio">
                <span>Visio</span>
              </label>
              <label class="form-radio">
                <input type="radio" name="contact_preference" value="atelier">
                <span>√Ä l'atelier</span>
              </label>
            </div>
          </div>
          
          <div class="form-group">
            <label class="form-label" for="rdv-project">D√©crivez votre projet *</label>
            <textarea id="rdv-project" name="message" class="form-textarea" rows="4" placeholder="Quel type d'instrument recherchez-vous ? Avez-vous d√©j√† jou√© du handpan ? Questions particuli√®res ?" required></textarea>
          </div>
          
          <button type="submit" class="btn btn--primary btn--lg btn--full">
            Envoyer ma demande
          </button>
          
          <p class="text-sm text-muted text-center" style="margin-top: var(--space-md);">
            Je vous recontacte sous 48h pour organiser notre √©change.
          </p>
        </form>
      </div>
      
      <!-- Back link -->
      <div class="text-center" style="margin-top: var(--space-2xl);">
        <a href="boutique.html" class="btn btn--ghost">‚Üê Retour √† la boutique</a>
      </div>
      
    </div>
  </section>
  </main>
  <div id="site-footer"></div>
  <div id="contact-modal-container"></div>

<!-- Scripts -->
<script src="js/features/cart.js"></script>
<script src="js/core/cookie-consent.js"></script>
<script src="js/core/main.js"></script>

<!-- PayPlug Integrated Payment SDK -->
<script src="https://cdn.payplug.com/js/integrated-payment/v1@1/index.js"></script>

<!-- Payment & Email modules -->
<script src="js/services/email-client.js" defer></script>
<script src="js/services/payplug-client.js" defer></script>
<script src="js/pages/commander.js" defer></script>

<script src="js/features/mistral-stats.js" defer></script>
</body>
</html>
