<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Configurez votre handpan Mistral Pans. Choisissez la gamme, la tonalité, le nombre de notes et les options.">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://mistralpans.fr/boutique.html">
  <meta property="og:title" content="Boutique Mistral Pans - Configurez votre handpan">
  <meta property="og:description" content="Configurez votre handpan sur mesure. Choisissez gamme, tonalité et options.">
  <meta property="og:image" content="https://mistralpans.fr/ressources/images/20230801_1622372.jpg">
  <meta property="og:locale" content="fr_FR">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Boutique Mistral Pans - Configurez votre handpan">
  <meta name="twitter:description" content="Configurez votre handpan sur mesure. Choisissez gamme, tonalité et options.">
  <meta name="twitter:image" content="https://mistralpans.fr/ressources/images/20230801_1622372.jpg">

  <title>Mistral Pans - Boutique | Configurez votre handpan</title>
  
  <!-- Fonts -->
  
  
  <!-- Styles -->
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/boutique.css">
  
  <!-- Admin Styles -->
  <link rel="stylesheet" href="css/admin.css">

</head>
<body id="top" data-page="boutique">

  <!-- Header dynamique -->
  <div id="site-header"></div>

  <!-- ===== BOUTIQUE TABS (Mobile only) ===== -->
  <div class="boutique-tabs" id="boutique-tabs">
    <div class="boutique-tabs__inner">
      <button class="boutique-tab active" data-panel="config">
        Créer sur mesure
      </button>
      <button class="boutique-tab" data-panel="stock">
        En stock
        <span class="boutique-tab__badge">
          <span class="boutique-tab__badge-dot"></span>
          <span id="stock-count-tab">0</span>
        </span>
      </button>
    </div>
  </div>

  <!-- ===== BOUTIQUE WRAPPER ===== -->
  <div class="boutique-wrapper" id="boutique-wrapper">
    
    <!-- PANEL 1: CONFIGURATOR -->
    <div class="boutique-panel boutique-panel--config" id="panel-config">


  <!-- ===== CONFIGURATOR ===== -->
  <main id="main-content" class="configurator">
    
    <!-- LEFT: Player Visual -->
    <section class="config-player">
      <div class="player-container">
        <div class="player-info">
          <h1 class="player-info__name" id="display-name">D Kurd</h1>
          <p class="player-info__notes" id="display-notes">D3 • A3 • Bb3 • C4 • D4 • E4 • F4 • G4 • A4</p>
          <p class="player-info__mood" id="display-mood">9 notes</p>
        </div>
        
        <div class="player-visual" id="player-visual">
          <!-- SVG generated by JS -->
        </div>
        
        <div class="player-legend" id="player-legend">
          <span class="legend-item"><span class="legend-dot legend-dot--tonal"></span> Tonales</span>
        </div>
        
        <div class="player-controls">
          <button class="btn-play" id="btn-play">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
              <polygon points="5,3 19,12 5,21"/>
            </svg>
            <span>Écouter</span>
          </button>
        </div>
      </div>
    </section>
    
    <!-- RIGHT: Options -->
    <section class="config-options">
      <div class="config-options-inner">
        <h2 class="config-title">Configurez votre instrument</h2>
        <p class="config-subtitle">Personnalisez selon vos préférences</p>
        
        <!-- Gamme -->
        <div class="option-group">
          <label class="option-label">Gamme</label>
          <div class="option-chips" id="chips-scale">
            <!-- Populated dynamically from MistralGammes -->
          </div>
        </div>

        <!-- Matériau -->
        <div class="option-group">
          <label class="option-label">Matériau</label>
          <div class="option-chips" id="chips-material">
            <!-- Populated dynamically by JS -->
          </div>
        </div>

        <!-- Nombre de notes -->
        <div class="option-group">
          <label class="option-label">Nombre de notes</label>
          <div class="notes-counter">
            <button class="counter-btn" id="notes-minus" aria-label="Moins">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="5" y1="12" x2="19" y2="12"></line>
              </svg>
            </button>
            <span class="counter-value" id="notes-value">9</span>
            <button class="counter-btn" id="notes-plus" aria-label="Plus">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
              </svg>
            </button>
          </div>
          <p class="notes-hint" id="notes-hint"></p>
        </div>
        
        <!-- Plus d'options -->
        <div class="options-advanced">
          <button class="options-toggle" id="toggle-advanced">
            <span>Plus d'options</span>
            <svg class="toggle-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
          </button>
          
          <div class="options-advanced-content" id="advanced-content">
            
            <!-- Tonalité -->
            <div class="option-group">
              <label class="option-label">Tonalité <span class="option-value" id="label-tonality">D3</span></label>
              <div class="option-chips" id="chips-tonality">
                <button class="chip" data-value="F2">F2</button>
                <button class="chip" data-value="F#2">F#2</button>
                <button class="chip" data-value="G2">G2</button>
                <button class="chip" data-value="G#2">G#2</button>
                <button class="chip" data-value="A2">A2</button>
                <button class="chip" data-value="A#2">A#2</button>
                <button class="chip" data-value="B2">B2</button>
                <button class="chip" data-value="C3">C3</button>
                <button class="chip" data-value="C#3">C#3</button>
                <button class="chip active" data-value="D3">D3</button>
                <button class="chip" data-value="D#3">D#3</button>
                <button class="chip" data-value="E3">E3</button>
                <button class="chip" data-value="F3">F3</button>
                <button class="chip" data-value="F#3">F#3</button>
                <button class="chip" data-value="G3">G3</button>
              </div>
            </div>
            
            <!-- Accordage -->
            <div class="option-group">
              <label class="option-label">Accordage</label>
              <div class="option-cards option-cards--2" id="cards-tuning">
                <div class="radio-card active" data-value="440">
                  <div class="radio-card__value">440 Hz</div>
                  <div class="radio-card__label">Standard</div>
                </div>
                <div class="radio-card" data-value="432">
                  <div class="radio-card__value">432 Hz</div>
                  <div class="radio-card__label">Harmonique</div>
                </div>
              </div>
            </div>
            
            <!-- Taille -->
            <div class="option-group">
              <label class="option-label">Taille (diamètre)</label>
              <div class="option-cards" id="cards-size">
                <!-- Populated dynamically from MistralTailles -->
              </div>
            </div>
            
          </div>
        </div>

        <!-- Accessoires (Housse) -->
        <div class="option-group option-group--accessoires" id="accessoires-section" style="display: none;">
          <label class="option-label">Ajouter une housse</label>
          <div class="accessoires-list" id="accessoires-list">
            <!-- Populated dynamically by JS -->
          </div>
        </div>
      </div>

      <!-- FOOTER: Price & CTA -->
      <div class="config-footer">
        <div class="price-display">
          <div class="price-breakdown" id="price-breakdown" style="display: none;">
            <span class="price-line">Instrument: <span id="price-instrument">1 080 €</span></span>
            <span class="price-line" id="price-housse-line" style="display: none;">Housse: <span id="price-housse">0 €</span></span>
          </div>
          <div class="price-total">
            <span class="price-label">Prix total</span>
            <span class="price-value" id="total-price">1 080 €</span>
          </div>
        </div>

        <a href="commander.html" class="btn btn-primary" id="btn-order">
          Commander cet instrument
        </a>

        <p class="config-note">
          Besoin de conseils ? <a href="#" data-modal="contact">Contactez-moi</a>
        </p>
      </div>
      
    </section>
  </main>
      
    </div><!-- end panel-config -->
    
    <!-- PANEL 2: STOCK -->
    <div class="boutique-panel boutique-panel--stock" id="panel-stock">
    
      <!-- Navigation Band (at top of stock panel) -->
      <div class="boutique-nav-band" id="nav-band">
        <button class="boutique-nav-band__btn" id="nav-band-btn">
          <span id="nav-band-text">Instruments en stock</span>
          <span class="nav-band__badge" id="nav-band-badge">
            <span class="nav-band__badge-dot"></span>
            <span id="nav-band-count">0</span>
          </span>
          <svg class="nav-band__arrow nav-band__arrow--down" id="nav-arrow-down" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="6 9 12 15 18 9"></polyline>
          </svg>
          <svg class="nav-band__arrow nav-band__arrow--up" id="nav-arrow-up" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:none;">
            <polyline points="18 15 12 9 6 15"></polyline>
          </svg>
        </button>
      </div>
  
  <!-- ===== FLASH SALES SECTION ===== -->
  <section class="flash-section" id="flash-sales">
    <div class="flash-container">
      <div class="flash-header">
        <div>
          <h2 class="flash-title">
            Disponibles immédiatement
            <span class="flash-badge">
              <span class="flash-dot" style="width:6px;height:6px;animation:none;"></span>
              <span id="stock-count-section">2</span> en stock
            </span>
          </h2>
          <p class="flash-subtitle">Ces instruments sont prêts à partir. Chaque pièce est unique.</p>
        </div>
      </div>
      
      <div class="flash-cards" id="flash-cards-container">
        <!-- Cards will be loaded by JavaScript -->
      </div>
    </div>
  </section>
  
    </div><!-- end panel-stock -->
  </div><!-- end boutique-wrapper -->
  
  <!-- Dots indicator (Mobile only) -->
  <div class="boutique-dots" id="boutique-dots">
    <button class="boutique-dot active" data-panel="config" aria-label="Configurateur"></button>
    <button class="boutique-dot" data-panel="stock" aria-label="Stock"></button>
  </div>
  
  <!-- Footer dynamique -->
  <div id="site-footer"></div>

  <!-- Contact modal dynamique -->
  <div id="contact-modal-container"></div>

  <!-- ===== MODALE DÉTAIL ANNONCE ===== -->
  <div class="annonce-modal" id="annonce-modal" role="dialog" aria-modal="true" aria-label="Annonce">
    <div class="annonce-modal__overlay"></div>
    <div class="annonce-modal__content">
      <!-- Header -->
      <div class="annonce-modal__header">
        <h2 class="annonce-modal__title" id="modal-annonce-title">D Kurd</h2>
        <button class="annonce-modal__close" id="modal-annonce-close" aria-label="Fermer">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>

      <!-- Body -->
      <div class="annonce-modal__body">
        <!-- Left: Gallery -->
        <div class="annonce-modal__gallery">
          <div class="annonce-gallery__main" id="modal-gallery-main">
            <img alt="Photo principale" id="modal-main-image" style="display:none;">
            <span class="annonce-gallery__no-image" id="modal-no-image" style="display:none;">
              <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
              <span>Aucune photo</span>
            </span>
            <button class="annonce-gallery__nav annonce-gallery__nav--prev" id="modal-gallery-prev" aria-label="Photo précédente">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="15 18 9 12 15 6"></polyline>
              </svg>
            </button>
            <button class="annonce-gallery__nav annonce-gallery__nav--next" id="modal-gallery-next" aria-label="Photo suivante">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="9 18 15 12 9 6"></polyline>
              </svg>
            </button>
          </div>
          <div class="annonce-gallery__thumbs" id="modal-gallery-thumbs">
            <!-- Thumbnails populated by JS -->
          </div>
        </div>

        <!-- Right: Details -->
        <div class="annonce-modal__details">
          <!-- Specs -->
          <div class="annonce-specs" id="modal-specs">
            <div class="annonce-spec">
              <span class="annonce-spec__label">Gamme</span>
              <span class="annonce-spec__value" id="modal-spec-gamme">—</span>
            </div>
            <div class="annonce-spec">
              <span class="annonce-spec__label">Notes</span>
              <span class="annonce-spec__value" id="modal-spec-notes">—</span>
            </div>
            <div class="annonce-spec">
              <span class="annonce-spec__label">Tonalité</span>
              <span class="annonce-spec__value" id="modal-spec-tonalite">—</span>
            </div>
            <div class="annonce-spec">
              <span class="annonce-spec__label">Accordage</span>
              <span class="annonce-spec__value" id="modal-spec-accordage">—</span>
            </div>
            <div class="annonce-spec">
              <span class="annonce-spec__label">Taille</span>
              <span class="annonce-spec__value" id="modal-spec-taille">—</span>
            </div>
            <div class="annonce-spec">
              <span class="annonce-spec__label">Matériau</span>
              <span class="annonce-spec__value" id="modal-spec-materiau">—</span>
            </div>
          </div>

          <!-- Notes layout -->
          <div class="annonce-notes-layout" id="modal-notes-layout">
            <span class="annonce-notes-layout__label">Disposition des notes</span>
            <span class="annonce-notes-layout__value" id="modal-notes-value">—</span>
          </div>

          <!-- Description -->
          <div class="annonce-description" id="modal-description-container" style="display:none;">
            <p id="modal-description"></p>
          </div>

          <!-- Video link -->
          <a href="#" class="annonce-video-link" id="modal-video-link" target="_blank" rel="noopener" style="display:none;">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polygon points="5 3 19 12 5 21 5 3"></polygon>
            </svg>
            Voir la vidéo
          </a>

          <!-- Handpaner link -->
          <a href="#" class="annonce-handpaner-link" id="modal-handpaner-link" target="_blank" rel="noopener" style="display:none;">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
              <polyline points="15 3 21 3 21 9"/>
              <line x1="10" y1="14" x2="21" y2="3"/>
            </svg>
            Voir sur Handpaner
          </a>

          <!-- Options -->
          <div class="annonce-options">
            <!-- Housse -->
            <div class="annonce-option" id="modal-housse-container" style="display:none;">
              <label class="annonce-option__label" for="modal-housse-select">Ajouter une housse</label>
              <select class="annonce-option__select" id="modal-housse-select">
                <option value="">Sans housse</option>
                <!-- Options populated by JS -->
              </select>
            </div>

            <!-- Livraison -->
            <div class="annonce-option">
              <label class="annonce-option__checkbox">
                <input type="checkbox" id="modal-livraison-checkbox">
                <span class="annonce-option__checkmark"></span>
                <span>Livraison (+50€)</span>
              </label>
            </div>
          </div>

          <!-- Price -->
          <div class="annonce-price">
            <div class="annonce-price__breakdown" id="modal-price-breakdown">
              <div class="annonce-price__line">
                <span>Instrument</span>
                <span id="modal-price-instrument">0 €</span>
              </div>
              <div class="annonce-price__line" id="modal-price-housse-line" style="display:none;">
                <span>Housse</span>
                <span id="modal-price-housse">0 €</span>
              </div>
              <div class="annonce-price__line" id="modal-price-livraison-line" style="display:none;">
                <span>Livraison</span>
                <span>50 €</span>
              </div>
            </div>
            <div class="annonce-price__total">
              <span class="annonce-price__label">Prix total</span>
              <span class="annonce-price__value" id="modal-price-total">0 €</span>
            </div>
          </div>

          <!-- CTA -->
          <a href="commander.html" class="btn btn-primary annonce-cta" id="modal-order-btn">
            Commander cet instrument
          </a>

          <p class="annonce-contact-note">
            Des questions ? <a href="#" data-modal="contact">Contactez-moi</a>
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- Scales data (unified source) -->
  <script src="js/data/scales-data.js"></script>

  <!-- Gammes data (centralized) -->
  <script src="js/data/gammes-data.js"></script>

  <!-- Tailles data (centralized) -->
  <script src="js/data/tailles-data.js"></script>

  <!-- Matériaux data (unified source) -->
  <script src="js/data/materiaux-data.js"></script>

  <!-- Module de faisabilité -->
  <script src="js/features/feasibility-module.js"></script>

  <!-- Configurateur -->
  <script src="js/pages/boutique.js"></script>

  <!-- Scripts -->
  
  <script src="js/core/cookie-consent.js"></script>
  <script src="js/core/main.js"></script>
  <script src="js/features/handpan-player.js"></script>

  <!-- Admin Scripts -->
  <script src="js/admin/admin-core.js"></script>
  <script src="js/admin/boutique-admin.js"></script>
  <script src="js/features/mistral-stats.js"></script>
</body>
</html>
